\subsubsubsubsection{Moving entity}
\begin{figure}[h]
\centering
\includegraphics[scale=0.6,keepaspectratio]{images/solution/app/backend/moving_entity.eps}
\caption{\pActive::MovingEntity}
\label{fig:sd-app-movingentity}
\end{figure}
\FloatBarrier
\begin{itemize}
  \item \textbf{\descr} \\
    It represents an entity that moves through the city, consuming its 
route at each stretch treaded.
  \item \textbf{\attrs}
  \begin{itemize}
    \item \texttt{id: Unsigned Int} \\
A unique identifier, useful to keep track of each entity.
    \item \texttt{state: Enum} \\
The possible states of the entity \{ running, stopped \}.
    \item \texttt{route: List<UrbanEntity>} \\
The route of urban entities that the entity has to tread.
    \item \texttt{maxSpeed: Unsigned Int} \\
The maximum possible speed for the entity.
    \item \texttt{\underline{scheduler: Scheduler}} \\
The manager of moving entity actions.
  \end{itemize}
  \item \textbf{\ops}
  \begin{itemize}
  \item[\#]  \texttt{MovingEntity(route: List<UrbanEntity>)} \\
Creates a moving entity setting its route.
    \item \texttt{changeState(state: Enum)} \\
Change the entity state. This method is used internally by public methods to 
change the entity behaviour.
    \item \texttt{setMaxSpeed(maxSpeed: Unsigned Int)} \\
Updates the maximum speed of the entity.
    \item[+]  \texttt{run()} \\
Activates the entity which sets its state to \textit{running} and 
starts consuming its route.
    \item[+]  \texttt{stop()} \\
Stops the entity which sets its state to \textit{stopped}.
   \item[+] \texttt{getMaxSpeed() : Unsigned Int} \\
Returns the maximum speed of the entity.
     \item[+] \texttt{getId() : Unsigned Int} \\
Returns the id of the entity. 
    \item[+] \texttt{notify(house: House) : Collection<Pedestrian>} \\
Decide if it want to rest in the house according to its route: in this case
returns a collection of pedestrians which wants to stay in the house, otherwise returns
an empty collection. 
    \item[+] \texttt{update()} \\
Updates itself according to changes in the Scheduler object it observes .
    \item[+] \texttt{update(roadSign: RoadSign) : boolean} \\
Check the road sign concrete type and then behaves according to it (i.e. if the
road sign is a speed limit it updates its maxSpeed using this.setSpeedLimit(roadSign.getLimit())). Returns true if completed correctly/action accepted, false otherwise.
  \end{itemize}
\end{itemize}
