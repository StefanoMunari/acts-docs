This section presents the middleware services.

An overview to the organization of the middleware components is given in Figure
\ref{fig:mw-arch-over}. The picture is both a dependency and an information flow
graph: if a service $A$ is above another one and has a downward connection
which touches service $B$, then $A$ both depends and sends messages to $B$.
We designed this structure in order to avoid circular dependencies among
services and to be able to reason clearly about an actor-model based system.
\\

Also, it is possible to send a message to a module which may seem
unreachable: the sender can hand the message off to the
forwarder, asking to delivery it to a loopback queue.
This mechanism has to be used carefully to avoid infinite loops. Therefore
we restrict its usage to specific situations.

\begin{figure}[H]
  \centering
  \includegraphics[height=9cm]{images/solution/mw/overview.eps}
  \caption{Middleware architecture overview}
  \label{fig:mw-arch-over}
\end{figure}

% \begin{itemize}
%   \item \texttt{naming}: service that provides a correspondence between logic
%     names and their actual location;
%   \item \texttt{forwarding}: service that represents the abstraction through
%     which it is possible to deliver messages to other middleware nodes;
%   \item \texttt{incoming}: service that is responsible of handling messages
%     coming from other middleware nodes;
%   \item \texttt{interlayer}: service that represents the interface between
%     the application and middleware layers;
%   \item \texttt{boot}: service that is responsible to start the system neatly;
%   \item \texttt{termination}: service that shut downs the node and the system
%     gracefully;
%   \item \texttt{snapshot}: service that takes consistent views of the node and
%     the system;
%   \item \texttt{coordination}: service that coordinates the interaction among
%     the nodes of the system;
%   \item \texttt{persistence}: service that provides a set of utilities to
%     store data in a persistent way.
% \end{itemize}

\input{sections/solutionDesign/architecture/mw-services/naming.tex}
\input{sections/solutionDesign/architecture/mw-services/forwarding.tex}
\input{sections/solutionDesign/architecture/mw-services/incoming.tex}
\input{sections/solutionDesign/architecture/mw-services/interlayer.tex}
\input{sections/solutionDesign/architecture/mw-services/boot.tex}
\input{sections/solutionDesign/architecture/mw-services/termination.tex}
\input{sections/solutionDesign/architecture/mw-services/snapshot.tex}
\input{sections/solutionDesign/architecture/mw-services/coordination.tex}
\input{sections/solutionDesign/architecture/mw-services/persistence.tex}
